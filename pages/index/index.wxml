<view class="index-container">
  <view class="index-header">
    <view class="welcome-card">
      <view class="welcome-icon">ğŸŒ¿</view>
      <view class="welcome-content">
        <text class="welcome-title">è¿™é‡Œå¯ä»¥æ¥ä½ä½ çš„æƒ…ç»ª</text>
        <text class="welcome-subtitle">ä¸è¯„åˆ¤ Â· ä¸è®°å½•éšç§ Â· ä¸è¯´æ•™</text>
      </view>
    </view>
    <view class="history-link" bindtap="goToHistory" wx:if="{{hasHistory}}">
      <text class="history-link-text">ğŸ“ æŸ¥çœ‹è®°å½•</text>
    </view>
  </view>


  <!-- éæƒ…ç»ªå†…å®¹æé†’ -->
  <view class="reminder-section" wx:if="{{showReminder}}">
    <view class="reminder-card">
      <view class="reminder-content">
        <text class="reminder-icon">ğŸ’¬</text>
        <text class="reminder-text">{{reminderMessage}}</text>
      </view>
      <view class="reminder-close" bindtap="closeReminder">
        <text class="close-icon">Ã—</text>
      </view>
    </view>
  </view>
  
  <!-- å¿«æ·æƒ…ç»ªæ ‡ç­¾ -->
  <view class="quick-emotions-section" wx:if="{{!inputText}}">
    <view class="quick-list">
      <view
        class="quick-chip"
        wx:for="{{quickEmotions}}"
        wx:key="text"
        data-text="{{item.text}}"
        bindtap="onSelectQuickEmotion"
      >
        <text class="chip-emoji">{{item.emoji}}</text>
        <text class="chip-text">{{item.text}}</text>
      </view>
    </view>
  </view>

  <view class="input-section">
    <view class="input-wrapper">
      <view class="input-label">
        <text class="label-icon">âœï¸</text>
        <text class="label-text">è¯´è¯´ä½ çš„æ„Ÿå—</text>
      </view>

      <view class="textarea-wrapper">
        <textarea 
          class="emotion-input" 
          placeholder="å†™ä¸‹æ­¤åˆ»çš„æ„Ÿå—ï¼Œè¶Šå…·ä½“è¶Šå¥½"
          value="{{inputText}}"
          bindinput="onInput"
          maxlength="500"
          auto-focus="{{false}}"
          show-confirm-bar="{{false}}"
          auto-height="{{false}}"
        ></textarea>
      </view>
      <view class="input-footer">
        <text class="char-count">{{inputText.length}}/500</text>
      </view>
    </view>
  </view>
  
  <view class="index-footer">
    <button 
      class="submit-btn {{inputText.length > 0 && !isAnalyzing ? 'active' : ''}}" 
      bindtap="submitTap"
      disabled="{{inputText.length === 0 || isAnalyzing}}"
      loading="{{isAnalyzing}}"
    >
      {{isAnalyzing ? 'æ­£åœ¨åˆ†æ...' : 'æˆ‘è¯´å®Œäº†'}}
    </button>
    
    <!-- å‹å¥½çš„åŠ è½½æç¤º -->
    <view class="loading-tip-section" wx:if="{{isAnalyzing && loadingTip}}">
      <view class="loading-tip-card">
        <view class="loading-tip-icon">ğŸ’­</view>
        <text class="loading-tip-text">{{loadingTip}}</text>
      </view>
    </view>
    
    <view class="footer-hint" wx:if="{{!inputText && !isAnalyzing}}">
      <text class="hint-text">ğŸ’š ä½ çš„æ„Ÿå—å€¼å¾—è¢«çœ‹è§</text>
    </view>

    <view class="helper-links">
      <text class="link-text" bindtap="goSettings">è®¾ç½®</text>
      <text class="link-divider">Â·</text>
      <text class="link-text" bindtap="goHelp">å¸®åŠ©</text>
    </view>
  </view>
</view>

